# 帰無仮説とは
    主観的要素が多く、経験による技術。
    但し、経験による技術とは人間というセンサー(測定値)によって、
    利害関係によって嘘をつく場合もある。

    この嘘の対策の１つとして、最初から人間は嘘をつくものと決めて
    かかり、その嘘が通る社会を一定の小さな割合に抑える考え方

    (例)スコットランド産のウイスキー「スコッチ」
        このスコッチは原料や製法によって「モルト」「グレーン」と「ブレンド」
        の3種類に大別される。
        Aはこの3種の分類わけが出来ると言い張っている。
        これは本当か嘘か、確かめることは可能か。

        まず、「Aは嘘をついている」という性悪説をとり、
        「Aは2種類のウイスキーを区別出来ない」という仮説を立てて、
        この仮説が正しいかどうかの実験で確かめる。
        このような仮説を帰無仮説という。

    帰無仮説は、推測とも呼ばれ、市場、投資戦略、または経済に関する理論をテストして、
    アイデアが正しいか間違っているかを判断するため の定量分析

## 帰無仮説を捨てる
    一般的には「仮説」とは、それが正しいものとして仮定してそれを証明利用する。
    しかし、帰無仮説はその仮説を捨てられる(棄却)できるかどうか、を検討するため
    に設定される仮説。
    
## 帰無仮説になりえる仮説
    帰無仮説は厳密な仮説であり、曖昧な仮説は帰無仮説にはなり得ない。
    例えば、ウイスキーの鑑定のような味覚の能力検定の場合、
    仮に「味覚の能力がある」という帰無仮説をとるとする。
    これはどの程度能力があるのか、という事になる、これは
    100%なのか、70%なのか、50%などという色々な能力が含まれる。
    厳密に言えば、無限大の数の能力が含まれることになる。

    すると、その各場合に対して検定する必要があり、無限大の状態をすべて検定するなど
    現実的に不可能であるといえる。

    しかし、これに反して、「味覚に能力がない」という仮説の内容はただ一つしかない。
    この意味で、帰無仮説としては捨てやすい仮説をとるという言い方が出来る。
    
    言い換えれば、帰無仮説とは捨てる(無に帰す)ことに意味のある仮設といえる。

## 対立仮説とは
    帰無仮説の反対仮説を対立仮説
    「味覚の能力がない」という帰無仮説を取っている場合「味覚に能力がある」
    というのが対立仮説になる。
    

## 帰無仮説を棄却とは
    帰無仮説を棄却するかどうかを決定する目的で、帰無仮説（略してH 0）は、
    議論のために真であると想定されます。次に、計算された統計の可能な値の可能性
    のある範囲（たとえば、30人の学生のテストの平均スコア）がこの推定の下で決定
    されます（たとえば、母集団の平均が7.0の場合、もっともらしい平均の範囲は6.2
    から7.8の範囲になる可能性があります）。次に、標本平均がこの範囲外の場合、
    帰無仮説は棄却されます。それ以外の場合、その違いは「偶然だけで説明できる」
    と言われ、偶然だけで決定される範囲内にあります。
    <グレゴリーJ.プリビテラ。「行動科学の統計」。第8章：仮説検定の(*1)>

## 有意水準(危険率)　信頼度　棄却域
    ■<有意水準(危険率)>
    帰無仮説の例<スコッチ>では、有限回の試行では、まぐれでの当たり確立を決して
    0にすることはできない。つまりまぐれあたりがある一定まで小さい所で手を打つ
    必要がある。
    
    この確率は、統計解析が経験的に与える値として、通常「5%以下」になれば
    「偶然ではない」と考える。

    この「5%」のことを有意水準(危険率)という。
    危険率とは、まぐれ当たりする確率に「ごまかされる確率」ともいえる

    ただ、この5%以内であってもまぐれ当たりする確率は０ではない。
    まぐれ当たりした場合でも仮説を捨ててしまう誤りは、100回のうち3.125回
    の割合。
    この誤りの事を　第一種の誤り　という。これは有意水準(危険率)といわれるもの

    有意水準は検定を行うときにあらかじめ決める　α　の事
    一般的には0.05　0.01　を取る
    0.05で仮説を捨てられれば「有意である」
    0.01で仮説を擦れ垂れれば「高度に有意である」

    ■<信頼度>
    確率をαとするとき、100*(1-α)を信頼度(%)という。
    したがって、信頼度95%とは、100*(1-α)=95 より　α=0.05
    さらに　　　信頼度99%　　　100*(1-α)=99      α=0.01
    
    したがって、有意水準(危険率)が0.05,0.01とは信頼度99%, 95%という
    ことになる

    ■<棄却域>
    有意水準(α)を与える　「領域」を棄却域という

## 帰無仮説の例<1>
    簡単な例を次に示します。学校の校長は、学校の生徒が試験で10点満点中平均7点
    を獲得していると主張しています。
    帰無仮説は、母平均が7.0であるというものです。この帰無仮説をテストするために、
    学校の全生徒集団（たとえば300）からたとえば30人の生徒（サンプル）のマークを
    記録し、そのサンプルの平均を計算します。
    ・<主張>母集団10：母平均7.0,　
    ・母集団300　標本集団30　
    
    次に、（計算された）サンプル平均を（仮定された）母平均7.0と比較し、
    帰無仮説を棄却することを試みることができます。
    （ここでの帰無仮説（母平均は7.0）は、サンプルデータを使用して証明することは
    できません。拒否することしかできません。）

    つまり、帰無仮説は、
    学校の生徒は、試験で10点満点中平均7点を獲得しています。

## 帰無仮説の例<2>
    年間収益は  8％であると主張されています。ミューチュアルファンドが20年間存在
    していると仮定します。
    帰無仮説は、ミューチュアルファンドの平均リターンが8％であるというものです。
    ・<主張>年間8%である　
    ・母集団20年　標本集団5年

    ミューチュアルファンドの年間収益のランダムなサンプルを、
    たとえば5年間（サンプル）取得し、サンプル平均を計算します。次に、
    （計算された）サンプル平均を（要求された）母集団平均（8％）と比較して、
    帰無仮説を検定します。
    
    つまり帰無仮説は、
    投資信託の平均年間収益は年間8％です。

## 帰無仮説の例<スコッチ>
    ２つのスコッチをグラスに入れ、Aはどちらがモルトかグレーンかわからないように
    味をみてもらう。その結果から「味覚の能力がない」という帰無仮説をすてるべきか
    
    Aがサイコロを振って奇数の目が出たらモルトのグラスに決め、偶数でグレーンにすると
    いうような決め方をしても、サイコロに異常がなければ100回のうち50回はまぐれ当たり
    するはず。
    つまりAの嘘が通る確率が1/2(50%)もあることになる。これはAのいう事を認める
    訳には行かない。
    
    そこでもう一度同じことをAにやってもらう。その結果、再びピタリと言い当てたとする。
    こうなると、Aのいう事は前よりも信ぴょう性を増す。
    1/2*1/2=1/4　という結果であるから。
    ただこれでもまだ25%もまぐれあたりする確率がある。それでは3回目
    1/2*1/2*1/2=1/8
    これで確率は12.5%となる。同様に4回で1/16(6.25%)5回で1/32(3.125%)
    というように試行回数を繰り返せば確率は確実に下がっていく。
    
    5回連続の場合、100回同様の試行をした場合にまぐれで連続的に当たる確率は
    3.125回である

## 広く使用されている仮説検定タイプ(必須)
    1. T検定（スチューデントのT検定）
        T検定： -t検定は、特定の機能に関連している可能性のある2つのグループ
        の平均間に有意差があるかどうかを判断するために使用される一種の推論統計。
        これは主に、コインを100回裏返した結果として記録されたデータセットのように、
        データセットが正規分布に従い、未知の分散を持つ可能性がある場合に使用。
        T検定は、母集団に適用可能な仮定の検定を可能にする
        仮説検定ツールとして使用されます。

            T検定には2つのタイプがあります：
                1. 1つのサンプリングされたt検定2.2つのサンプリングされたt検定。
                　　1標本t検定：1標本t検定は、標本平均が既知または仮説の母平均と
                    統計的に異なるかどうかを判別します。
                    One Sample t Testは、パラメトリック検定です。
                2. 2つのサンプリングされたT検定：-インデペンデントサンプルt検定または、
                    2標本t検定は、関連する母平均が有意に異なるという統計的証拠
                    があるかどうかを判断するために、2つの独立したグループの平均を比較
                    
                    独立サンプルt検定は、パラメトリック検定です。
                    このテストは、次のようにも知られています。独立t検定。

            A. 対応のあるサンプルのt検定：
                1. 対応のあるサンプルのt検定は、従属サンプルのt検定とも呼ばれます。
                    これは、2つの関連する変数間の有意差を検定する単変量検定です。
                    この例は、治療、状態、または時点の前後に個人の血圧を収集する
                    場所の場合です。
                    H0：-2つのサンプル間の差が0であることを意味します
                    H1：-2つのサンプル間の平均差は0ではありません
    2. Z検定
        Z検定を実行できる場合
            ・サンプルサイズが30を超えています。それ以外の場合は、
            　tテストを使用してください。

            ・データポイントは互いに独立している必要があります。
            　つまり、あるデータポイントは関連していないか、
            　別のデータポイントに影響を与えません。

            ・データは正規分布する必要があります。
            　ただし、サンプルサイズが大きい（30を超える）場合、
            　これは必ずしも重要ではありません。

            ・データは母集団からランダムに選択する必要があります。
            　各アイテムが選択される可能性は同じです。

            ・サンプルサイズは、可能な限り等しくする必要があります。
                
        2標本Z検定
            ・2標本z検定では、ここでのt検定と同様に、
            　2つの独立したデータグループをチェックし、
            　2つのグループの標本平均が等しいかどうかを判断します。
               
                H0：2つのグループの平均は0です
                H1：2つのグループの平均が0ではない
    3. ANOVAテスト
        ・ANOVA（F-TEST）：
        2つのグループを処理する場合、t検定はうまく機能しますが、
        3つ以上のグループを同時に比較したい場合があります。
        たとえば、投票者の年齢が人種などのカテゴリ変数に基づいて異なるかどうか
        をテストする場合は、各レベルの平均を比較するか、変数をグループ化する必要が
        あります。グループのペアごとに個別のt検定を実行することもできますが、
        多くのテストを実行すると、誤検知の可能性が高くなります。
        分散分析またはANOVAは、複数のグループを同時に比較できる統計的推論テストです。
        F=グループ間変動/グループ内変動

        z分布やt分布とは異なり、F分布には負の値はありません。
        これは、各偏差を2乗するため、グループ間およびグループ内の変動が常に正で
        あるためです。

        ・一元配置F検定（Anova）：平均類似度とFスコアに基づいて、
        　2つ以上のグループが類似しているかどうかを判断します。

        ・双方向F検定： 2方向F検定は、1方向f検定の拡張であり、
        　2つの独立変数と2+グループがある場合に使用されます。
        　2方向F検定では、どの変数が優勢であるかはわかりません。
        　個々の有意性を確認する必要がある場合は、事後テストを実行する必要があります。
    4. カイ二乗検定
        カイ二乗検定-この検定は、
        単一の母集団から2つのカテゴリ変数がある場合に適用されます。
        これは、2つの変数の間に有意な関連があるかどうかを判断するために使用されます。

        たとえば、選挙調査では、有権者は性別（男性または女性）と投票の好み
        （民主党、共和党、または独立）によって分類される場合があります。
        性別が投票の好みに関連しているかどうかを判断するために、
        独立性のカイ2乗検定を使用できます。


## ｔ分布 (必須) 
    推定の問題を扱うには「ｔ分布表」が必要になる
    
    ・母集団の平均と標本の平均
    「正規分布」する母集団の性質は、分布の中心を示す母平均μ、分布の広がり
    を示す母標準偏差σ(ベルの広がり)　の２つによって完全に示される
    しかし、一般に言えば、μやσの値を直接観測することはできない。
    そこで母集団から標本(サンプル)を取り出し、この標本から取り出した標本平均
    \={x}をμの推定値として使用し、標本標準偏差ｓをσの推定値として使用する。
    \={x}の分布の標準偏差を求めるので、不偏分散S^2を求める
    不偏分散S^2 = (xi - \={x})^2/(n-1) = 偏差平方和/自由度 = √

    この不偏分散は、母分散の不偏推定値ともいい、これを平方に開いたものを
    母標準偏差の不偏推定値と呼ぶ。

    n個の標本から求めた標本平均は、母平均μを中心にしてσ/√nの標準偏差で正規分布する
    これよりσがわかれば、正規分布の表を利用してμの区間推定が可能。
    \={x}とμとのへだたり(\={x}-μ)を標準偏差の単位であらわした値(\={x}-μ)/(σ/√n)
    がN(0, 1)の正規分布に従うとして数表の利用が可能。
    σがわからずｓだけの時
    \={x}-μ/s√n-1
    この値をtとすれば、この数表が作成される。これをｔ分布表という。

    ・正規分布をする母集団
    ・標本を抽出、\={x}を求める
    ・σの代わりにｓを使い、平均値を0、標準偏差を１に調整
        t = \={x}-μ/s√n 
    これがｔ分布となる。
    

    大前提
    ・正規分布の母集団

## t分布<表>とは
    分布の中心0から t以上離れた値が出現する確率を示す物
    
    (P/2)の面積が<両すそ>あわせて面積(5%、10%)になるときの t値が、絶対値の形で表記
    

## t分布と正規分布の違い
    t分布は標本数nが変わると形が変わる。
    nがちいさくなれば平べったい形に変わる。
    
    t分布は正規分布と違い、自由度という係数が必要
    これは標本n数によって分布の形状が変化するから。
    自由度は(Φ)(fai)であらわされる。

## 帰無仮説について<*2>
    仮説は主張であり、統計を使用してそれらを証明または反証することができます。
    この時点で、仮説検定は問題を構造化し、統計的証拠を使用してこれらの主張を検定
    できるようにします。したがって、クレームが有効かどうかを確認できます。

    仮説検定のプロセスについて簡単に説明

    1.仮説の定義
    まず、答えを探している科学的な質問を理解し、
    帰無仮説（H₀）と対立仮説（H₁またはHₐ）の形で定式化する必要があります。
    H₀とH₁は相互に排他的である必要があり、
    H₁に同等性が含まれていてはならないことに注意してください。

    H₀： μ= x、H₁： μ≠x
    H₀： μ≤x、H₁： μ> x
    H₀： μ≥x、H₁： μ<x

    2.仮定チェック
    テストのパラメトリックバージョンとノンパラメトリックバージョンのどちらを
    使用するかを決定するには、以下にリストされている特定の要件を確認する
    必要があります。

    各サンプルの観測値は独立しており、同じように分布しています（IID）。
    各サンプルの観測値は正規分布しています。
    各サンプルの観測値には同じ分散があります。
    
    3.適切なテストの選択
    次に、使用する適切なテストを選択します。適切なテストを選択するときは、
    比較されているグループの数と、データがペアになっているかどうかを分析
    することが不可欠です。データが一致しているかどうかを判断するには、
    データが同じ個人から収集されたかどうかを考慮する必要があります。
    したがって、下の表を使用して適切なテストを決定できます。

    4.決定と結論
    仮説検定を実行した後、検定の有意性を示す関連するp値を取得します。

    p値がアルファ（有意水準）よりも小さい場合、
    つまり、H₀が無効であることを証明するのに十分な証拠があります。H₀を拒否できます。
    そうしないと、H₀を拒否できません。
    H₀を拒否するとH₁が有効になることに注意してください。
    ただし、H₀を拒否しなかったからといって、H1が有効であるとか、
    H1が間違っているとかというわけではありません。

    
# 参照URL

・(*1)[グレゴリーJ.プリビテラ。「行動科学の統計」](https://www.sagepub.com/sites/default/files/upm-binaries/40007_Chapter8.pdf)

・[帰無仮説_Science-Direct](https://www.sciencedirect.com/topics/earth-and-planetary-sciences/null-hypothesis)

・(*2)[Pythonを使用した仮説検定：実践的な例を使用した ステップバイステップのハンズオンチュートリアル](https://towardsdatascience.com/hypothesis-testing-with-python-step-by-step-hands-on-tutorial-with-practical-examples-e805975ea96e)